
## Description

Rackspace Hosting - Creates the necessary resources for a NFS Server instance. Please be aware that this template will create resources for which you will be charged.

#### Metadata

 * **AWS::CloudFormation::Interface**: {u'ParameterGroups': [{u'Parameters': [u'VPCID', u'VPCSecurityGroupIds', u'CIDRRange', u'Environment'], u'Label': {u'default': u'Network Configuration'}}, {u'Parameters': [u'NFSServerType', u'NFSVolumeSize', u'NFSVolumeType', u'NFSEbsDelete', u'NFSSubnet', u'BackupRetention', u'EbsVolumeSize', u'EbsVolumeType'], u'Label': {u'default': u'NFS Server Configuration'}}]}
 * **Comments**: Generated by Ansible
 * **Version**: v0.1.0

## Parameters

 * **CIDRRange** - The CIDR range that has access to mount folders from the NFS server
  * Default: `172.18.0.0/16`
  * Constraint: `must be a valid IP CIDR range of the form x.x.x.x/xx`
 * **EbsVolumeSize** - Select Root EBS Volume Size in GB.
  * Default: `10`
 * **EbsVolumeType** - Select Root EBS Volume Type.
  * Default: `standard`
 * **Environment** - Application environment for which this network is being created. e.g. Development/Production.
  * Default: `Development`
 * **NFSEbsDelete** - Specifies whether you want to delete the NFS Volume or not when deleting the NFS Server.
  * Default: `False`
 * **NFSServerType** - Select server size for NFS server
  * Default: `c4.large`
 * **NFSSubnet** - Subnet for NFS
 * **NFSVolumeSize** - Select Data EBS Volume Size in GB for the NFS.
  * Default: `50`
 * **NFSVolumeType** - Select Data EBS Volume Type for the NFS.
  * Default: `gp2`
 * **VPCID** - Select Virtual Private Cloud ID
 * **VPCSecurityGroupIds** - Existing security groups being used by App ec2 instances. If no AppSG, enter the VPC Default.
  * Default: ``

## Conditions

 * **EbsIopsEnabled** - `{u'Fn::Equals': [{u'Ref': u'EbsVolumeType'}, u'io1']}`
 * **NFSIopsEnabled** - `{u'Fn::Equals': [{u'Ref': u'NFSVolumeType'}, u'io1']}`

## Mappings

 * **AWSRegionArch2AMI**:
  * `(u'ap-south-1', {u'64': u'ami-cacbbea5'})`
  * `(u'us-east-1', {u'64': u'ami-c481fad3'})`
  * `(u'ap-northeast-1', {u'64': u'ami-1a15c77b'})`
  * `(u'ap-southeast-2', {u'64': u'ami-55d4e436'})`
  * `(u'eu-west-1', {u'64': u'ami-d41d58a7'})`
  * `(u'ap-southeast-1', {u'64': u'ami-7243e611'})`
  * `(u'ap-northeast-2', {u'64': u'ami-a04297ce'})`
  * `(u'us-west-2', {u'64': u'ami-b04e92d0'})`
  * `(u'us-west-1', {u'64': u'ami-de347abe'})`
  * `(u'eu-central-1', {u'64': u'ami-0044b96f'})`
  * `(u'sa-east-1', {u'64': u'ami-b777e4db'})`
 * **Ebs**:
  * `(u'gp2', {u'10': u'100', u'20': u'100', u'200': u'600', u'30': u'100', u'50': u'150', u'40': u'120', u'100': u'300', u'500': u'1500'})`
  * `(u'io1', {u'10': u'300', u'20': u'600', u'200': u'6000', u'30': u'900', u'50': u'1500', u'40': u'1200', u'100': u'3000', u'500': u'15000'})`
  * `(u'standard', {u'10': u'100', u'20': u'100', u'200': u'100', u'30': u'100', u'50': u'100', u'40': u'100', u'100': u'100', u'500': u'100'})`

## Resources

 * **InstanceRole** - `AWS::IAM::Role`
 * **InstanceRoleInstanceProfile** - `AWS::IAM::InstanceProfile`
 * **InstanceRolePolicies** - `AWS::IAM::Policy`
 * **NFSInstance** - `AWS::EC2::Instance`
 * **RecoveryAlarm** - `AWS::CloudWatch::Alarm`

## Outputs

 * **NFSServerPrivateIP** - `{u'Fn::GetAtt': [u'NFSInstance', u'PrivateIp']}`