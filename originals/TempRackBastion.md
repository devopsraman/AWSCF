
## Description

Temporary single instance Rackspace Bastion Template. **WARNING** This template creates one or more Amazon EC2  instances and an Elastic Load Balancer. You will be billed for the AWS resources used if you create a stack from this template.

#### Metadata

 * **Comments**: Generated by Ansible
 * **Version**: v0.2

## Parameters

 * **BastionName** - EC2 Server Instance Name
  * Default: `RackBastion`
  * Constraint: `Must follow normal EC2 syntax conventions`
 * **BastionSubnet** - Public Subnet Bastion is in.
 * **EBSVolumeIops** - IOPS for EBSVolume. If using IO1 you must make EBS Volume size 100 or more.
  * Default: `10`
 * **EBSVolumeSize** - Volume Size for EBS Volume
  * Default: `0`
 * **EBSVolumeType** - Type of EBS Volume. If using IO1 you must make EBS Volume size 100 or more.
  * Default: `standard`
 * **Environment** - Application environment for which this network is being created. e.g. Development/Production.
  * Default: `Development`
 * **InstanceType** - Select instance type
  * Default: `t2.micro`
  * Constraint: `Must be a valid EC2 instance type. Default is t2.micro`
 * **InstancesPublicIP** - Specifies whether to launch instances with public IP addresses in your VPC
  * Default: `True`
 * **KeyName** - Name of an existing EC2 KeyPair to enable SSH access to the instances
  * Constraint: `Must be the name of an existing EC2 KeyPair.`
 * **SSHLocation** - The IP address range that can be used to SSH to the EC2 instances
  * Default: `0.0.0.0/0`
  * Constraint: `Must be a valid CIDR range of the form x.x.x.x/x.`
 * **VPCID** - Select Virtual Private Cloud ID
 * **VPCSecurityGroupIds** - Existing security groups being used by App ec2 instances. If no AppSG, enter the VPC Default.
  * Default: ``

## Conditions

 * **DefineIOPS** - `{u'Fn::Equals': [{u'Ref': u'EBSVolumeType'}, u'io1']}`
 * **UseEBSVolume** - `{u'Fn::Not': [{u'Fn::Equals': [{u'Ref': u'EBSVolumeSize'}, u'0']}]}`

## Mappings

 * **AWSInstanceType2Arch**:
  * `(u't2.micro', {u'Arch': u'HVM64'})`
 * **AWSRegionArch2AMI**:
  * `(u'ap-south-1', {u'64': u'ami-cacbbea5'})`
  * `(u'us-east-1', {u'64': u'ami-c481fad3'})`
  * `(u'ap-northeast-1', {u'64': u'ami-1a15c77b'})`
  * `(u'ap-southeast-2', {u'64': u'ami-55d4e436'})`
  * `(u'eu-west-1', {u'64': u'ami-d41d58a7'})`
  * `(u'ap-southeast-1', {u'64': u'ami-7243e611'})`
  * `(u'ap-northeast-2', {u'64': u'ami-a04297ce'})`
  * `(u'us-west-2', {u'64': u'ami-b04e92d0'})`
  * `(u'us-west-1', {u'64': u'ami-de347abe'})`
  * `(u'eu-central-1', {u'64': u'ami-0044b96f'})`
  * `(u'sa-east-1', {u'64': u'ami-b777e4db'})`

## Resources

 * **BastionServer** - `AWS::EC2::Instance`
 * **MountPoint** - `AWS::EC2::VolumeAttachment`
 * **Volume** - `AWS::EC2::Volume`

## Outputs

 * **AZ** - `{u'Fn::GetAtt': [u'BastionServer', u'AvailabilityZone']}`
 * **InstanceId** - `{u'Ref': u'BastionServer'}`
 * **PublicDNS** - `{u'Fn::GetAtt': [u'BastionServer', u'PublicDnsName']}`
 * **PublicIP** - `{u'Fn::GetAtt': [u'BastionServer', u'PublicIp']}`