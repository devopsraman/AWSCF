
## Description

Rackspace Hosting - Elastic Load Balancer version 1 (Classic) Template.

#### Metadata

 * **AWS::CloudFormation::Interface**: {u'ParameterGroups': [{u'Parameters': [u'LoadBalancerName', u'Scheme', u'CrossZone', u'Environment', u'Subnets', u'SecurityGroups', u'ELBTimeOut'], u'Label': {u'default': u'ELBv1 GENERAL CONFIGURATION:'}}, {u'Parameters': [u'ASGTargets', u'Instances'], u'Label': {u'default': u'TARGETS CONFIGURATION:'}}, {u'Parameters': [u'ELBHealthTarget', u'ELBHealthyThreshold', u'ELBHealthTimeout', u'ELBUnHealthyThreshold', u'ELBHealthInterval', u'ELBCookieExpirationPeriod', u'ELBConnectionDrainingTimeout'], u'Label': {u'default': u'TARGET HEALTH MONITORING CONFIGURATION:'}}, {u'Parameters': [u'ELBInstancePort', u'ELBInstanceProtocol', u'ELBLoadBalancerPort', u'ELBLoadBalancerProtocol'], u'Label': {u'default': u'LISTENER 1 CONFIGURATION:'}}, {u'Parameters': [u'ELBSecondaryListener', u'ELB2ndInstancePort', u'ELB2ndInstanceProtocol', u'ELB2ndLoadBalancerPort', u'ELB2ndLoadBalancerProtocol'], u'Label': {u'default': u'LISTENER 2 CONFIGURATION:'}}, {u'Parameters': [u'SSLIdCert'], u'Label': {u'default': u'SSL CONFIGURATION:'}}, {u'Parameters': [u'CreateLoggingBucket', u'ELBS3BucketName', u'ELBS3BucketPrefix', u'ELBLogAccessControl'], u'Label': {u'default': u'S3 Logging Configuration (OPTIONAL).'}}], u'ParameterLabels': {u'ELBS3BucketName': {u'default': u'S3 Bucket Name'}, u'ELBLoadBalancerPort': {u'default': u'Load Balancer Port'}, u'ELB2ndInstanceProtocol': {u'default': u'Instance Protocol'}, u'ELBHealthTarget': {u'default': u'Health Target'}, u'ELBHealthInterval': {u'default': u'Health Check Interval'}, u'ELBHealthTimeout': {u'default': u'Health Timeout'}, u'ELBUnHealthyThreshold': {u'default': u'UnHealthy Threshold'}, u'ELBConnectionDrainingTimeout': {u'default': u'Draining Timeout'}, u'CreateLoggingBucket': {u'default': u'New S3 Logging Bucket'}, u'ELBLogAccessControl': {u'default': u'S3 Log Access Control'}, u'SecurityGroups': {u'default': u'Security Groups'}, u'ELB2ndLoadBalancerPort': {u'default': u'Load Balancer Port'}, u'ELBInstancePort': {u'default': u'Instance Port'}, u'ELBCookieExpirationPeriod': {u'default': u'Cookie Expiration'}, u'ELBInstanceProtocol': {u'default': u'Instance Protocol'}, u'ELB2ndLoadBalancerProtocol': {u'default': u'Load Balancer Protocol'}, u'SSLIdCert': {u'default': u'SSL Certificate ID'}, u'CrossZone': {u'default': u'Cross Zone'}, u'ELBS3BucketPrefix': {u'default': u'S3 Bucket Prefix'}, u'ELBHealthyThreshold': {u'default': u'Healthy Threshold'}, u'ASGTargets': {u'default': u'ELBv1 Targets Are ASG'}, u'ELBTimeOut': {u'default': u'Load Balancer Timeout'}, u'ELBSecondaryListener': {u'default': u'Use Listener 2'}, u'LoadBalancerName': {u'default': u'Load Balancer Name'}, u'ELBLoadBalancerProtocol': {u'default': u'Load Balancer Protocol'}, u'ELB2ndInstancePort': {u'default': u'Instance Port'}}}
 * **Comments**: Generated by Ansible
 * **Version**: v1.0

## Parameters

 * **ASGTargets** - Are the targets part of an auto scaling group.
  * Default: `True`
 * **CreateLoggingBucket** - Create a new S3 logging bucket
  * Default: `false`
 * **CrossZone** - Whether cross-zone load balancing is enabled for the load balancer.
  * Default: `true`
 * **ELB2ndInstancePort** - Specifies the 2nd TCP port on which the instance server is listening.
  * Default: `80`
 * **ELB2ndInstanceProtocol** - Specifies the 2nd protocol to use for routing traffic to back-end instances HTTP / HTTPS / TCP / SSL.
  * Default: `HTTP`
 * **ELB2ndLoadBalancerPort** - Specifies the 2nd external load balancer port number.
  * Default: `80`
 * **ELB2ndLoadBalancerProtocol** - Specifies the 2nd protocol to use for the Load Balancer HTTP / HTTPS / TCP / SSL.
  * Default: `HTTP`
 * **ELBConnectionDrainingTimeout** - Set the timeout value for elastic loadbalancer draining policy if desired. OPTIONAL
  * Default: `0`
 * **ELBCookieExpirationPeriod** - Generates a stickiness policy with sticky session lifetimes controlled by a specified expiration period. Leave blank not to use.
  * Default: ``
 * **ELBHealthInterval** - Seconds between health checks.
  * Default: `30`
 * **ELBHealthTarget** - Protocol & port check on instance. TCP:5000 | SSL:5000 || HTTP(S) = HTTP:80/path/to/my/file.
  * Default: `HTTP:80/`
 * **ELBHealthTimeout** - Number of seconds during which no response means a failed health probe.
  * Default: `5`
 * **ELBHealthyThreshold** - Consecutive successful checks before marking instance healthy.
  * Default: `3`
 * **ELBInstancePort** - Specifies the TCP port on which the instance server is listening.
  * Default: `80`
 * **ELBInstanceProtocol** - Specifies the protocol to use for routing traffic to back-end instances HTTP / HTTPS / TCP / SSL.
  * Default: `HTTP`
 * **ELBLoadBalancerPort** - Specifies the external load balancer port number.
  * Default: `80`
 * **ELBLoadBalancerProtocol** - Specifies the protocol to use for the Load Balancer HTTP / HTTPS / TCP / SSL.
  * Default: `HTTP`
 * **ELBLogAccessControl** - Define ACL for Bucket
  * Default: `BucketOwnerFullControl`
  * Constraint: `Must be either AuthenticatedRead, AwsExecRead, BucketOwnerRead, BucketOwnerFullControl, LogDeliveryWrite, Private, PublicRead or PublicReadWrite.`
 * **ELBS3BucketName** - The name of the bucket to use for ELB logs. Must be unique.
  * Default: ``
  * Constraint: `The bucket name must contain only lowercase letters, numbers, periods (.), and dashes (-).`
 * **ELBS3BucketPrefix** - The prefix for the location in the S3 bucket. If you don't specify a prefix, the access logs are stored in the root of the bucket.
  * Default: `FrontendELBLogs`
 * **ELBSecondaryListener** - Enable Secondary Listener on the Load Balancer
  * Default: `False`
 * **ELBTimeOut** - The time (in seconds) that a connection to the load balancer can remain idle, which means no data is sent over the connection. After the specified time, the load balancer closes the connection.
  * Default: `0`
 * **ELBUnHealthyThreshold** - Consecutive failed checks before marking instance unhealthy.
  * Default: `3`
 * **Environment** - Application environment for which this network is being created. e.g. Development/Production.
  * Default: `Development`
 * **Instances** - A list of EC2 instance IDs for the load balancer. Use when not assigned to auto scale group.
  * Default: ``
 * **LoadBalancerName** - This name must be unique within your set of load balancers for the region.
  * Default: `NewELBv1`
 * **SSLIdCert** - SSL Certificate Name. Full ARN required.
  * Default: `0`
  * Constraint: `Must be an existing SSL Name.`
 * **Scheme** - Specifies whether to create an internal ELB or a public facing one.
  * Default: `internet-facing`
 * **SecurityGroups** - A list of security groups assigned to your load balancer within your virtual private cloud (VPC).
 * **Subnets** - A list of subnet IDs in your virtual private cloud (VPC) to attach to your load balancer.

## Conditions

 * **ELBCookieStickinessPolicy** - `{u'Fn::Not': [{u'Fn::Equals': [{u'Ref': u'ELBCookieExpirationPeriod'}, u'']}]}`
 * **ELBTimeOutTimeout** - `{u'Fn::Not': [{u'Fn::Equals': [{u'Ref': u'ELBTimeOut'}, u'0']}]}`
 * **NewS3Bucket** - `{u'Fn::Equals': [{u'Ref': u'CreateLoggingBucket'}, u'true']}`
 * **SSL2ndEnabled** - `{u'Fn::Or': [{u'Fn::Equals': [{u'Ref': u'ELB2ndLoadBalancerProtocol'}, u'SSL']}, {u'Fn::Equals': [{u'Ref': u'ELB2ndLoadBalancerProtocol'}, u'HTTPS']}]}`
 * **SSLEnabled** - `{u'Fn::Or': [{u'Fn::Equals': [{u'Ref': u'ELBLoadBalancerProtocol'}, u'SSL']}, {u'Fn::Equals': [{u'Ref': u'ELBLoadBalancerProtocol'}, u'HTTPS']}]}`
 * **isELB2ndListener** - `{u'Fn::Equals': [{u'Ref': u'ELBSecondaryListener'}, u'True']}`
 * **isELBConnectionDrain** - `{u'Fn::Not': [{u'Fn::Equals': [{u'Ref': u'ELBConnectionDrainingTimeout'}, u'0']}]}`
 * **isELBLogging** - `{u'Fn::Not': [{u'Fn::Equals': [{u'Ref': u'ELBS3BucketName'}, u'']}]}`
 * **isNotASG** - `{u'Fn::Equals': [{u'Ref': u'ASGTargets'}, u'False']}`

## Resources

 * **ELBS3LoggingBucketPolicy** - `AWS::S3::BucketPolicy`
 * **ELBv1** - `AWS::ElasticLoadBalancing::LoadBalancer`
 * **S3BucketwithLogging** - `AWS::S3::Bucket`
 * **UnHealthyHostCountAlarm** - `AWS::CloudWatch::Alarm`

## Outputs

 * **outputELBv1** - `{u'Ref': u'ELBv1'}`
 * **outputS3BucketName** - `{u'Ref': u'S3BucketwithLogging'}`
 * **outputUnHealthyHostCountAlarm** - `{u'Ref': u'UnHealthyHostCountAlarm'}`